(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const F=["C","D","H","S"],K={1:"A",11:"J",12:"Q",13:"K"},U=(t,e)=>isNaN(t)?t==="A"?e+11>21?1:11:10:+t,V=(t,e)=>t==="A"?1:e==="A"?-1:0,W=t=>[...t].map((e,n,s)=>{const r=n+Math.floor(Math.random()*(s.length-n));return[s[r],s[n]]=[s[n],s[r]],s[n]}),u=t=>new Promise(e=>setTimeout(e,t)),N=()=>{var e;const t=[];for(let n=1;n<=13;n++)for(const s of F){const r=(e=K[n])!=null?e:n;t.push(`${r}${s}`)}return W(t)},B=t=>{if(!t.length>0)throw"No more cards.";return t.pop()},C=t=>{let e=0;const n=t.map(s=>s.substring(0,s.length-1)).sort(V);for(const s of n)e+=U(s,e);return e},T=t=>{const e=document.createElement("img");return e.src=`./playing_cards/${t}.png`,e.classList.add("card"),e};(()=>{const t=document.querySelector("#hit-button"),e=document.querySelector("#stand-button"),n=document.querySelector("#new-game-button"),s=document.querySelector("#player-score"),r=document.querySelector("#dealer-score"),o=document.querySelector("#player-cards"),i=document.querySelector("#dealer-cards"),v=document.querySelector("#alert-container");let p=N(),c=0,a=0,h=[],f=[];const y=()=>{t.disabled=!0,t.classList.add("disabled")},A=()=>{e.disabled=!0,e.classList.add("disabled")},G=()=>{n.disabled=!0,n.classList.add("disabled")},D=()=>{t.disabled=!1,t.classList.remove("disabled")},H=()=>{e.disabled=!1,e.classList.remove("disabled")},m=()=>{n.disabled=!1,n.classList.remove("disabled")},M=()=>{y(),A(),G()},P=()=>{D(),H(),m()},E=(l,d)=>{v.innerHTML=[`<div class="alert alert-${d} alert-min-width fade show text-center mt-4" role="alert">`,`   <h4 class="alert-heading mb-0">${l}</h4>`,"</div>"].join("")},w=()=>{v.innerHTML=""},b=()=>{w(),E("Dealer wins!","danger")},x=()=>{w(),E("Player wins!","success")},$=()=>{o.innerHTML="",i.innerHTML="",s.innerHTML="0",r.innerHTML="0"},g=()=>{i.innerHTML="",r.innerText=a;for(const l of f){const d=T(l);i.append(d)}},L=()=>{const l=B(p),d=T(l);h.push(l),c=C(h),s.innerText=c,o.append(d)},S=(l=!1)=>{const d=B(p),_=T(l?"grey_back":d);f.push(d),a=C(f),l||(r.innerText=a),i.append(_)},O=async()=>{for(M(),g();a!==21&&a<c;)await u(500),S();a===21?b():a>21?x():a>=c&&b(),m()},q=async()=>{if(M(),await u(500),L(),await u(500),S(),await u(500),L(),await u(500),S(!0),a===21){m(),g(),b();return}if(c===21){H(),m();return}P()},I=()=>{w(),$(),p=N(),c=0,a=0,h=[],f=[],q()};t.addEventListener("click",()=>{if(c>=21)throw"Maximum score reached or exceeded.";L(),c===21&&y(),c>21&&(y(),A(),g(),b())}),e.addEventListener("click",()=>{O()}),n.addEventListener("click",()=>{I()}),q()})();
